<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <title>Ohjelmointikielen valinta</title>
  <style type="text/css">code{white-space: pre;}</style>
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>
  <link rel="stylesheet" href="../css/base.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <script src="../javascript/jquery.min.js"></script>
  <script src="../javascript/bootstrap.js"></script>
  <script src="../javascript/jquery.treeview.js"></script>
  <script src="../javascript/jquery.scrollTo.js"></script>
  <script src="../javascript/jquery.nav.js"></script>
  <script src="../javascript/navi.js"></script>
</head>
<body>
<div class="titlebar">
  <div class="container">
    <div class="row">
      <h1 class="col-md-6 col-md-offset-3">Advanced Kittenry - Tietokantasovellusohjeet</h1>
    </div>
  </div>
</div>
<div class="container">
<div class="row">
<div class="navcontainer col-md-3">
<nav>
<ul>
<li><a href="../index.html">Tietokantasovellus</a>
<ul>
<li><a href="../aikataulu/index.html">Aikataulu</a>
<ul>
<li><a href="../aikataulu/viikko1.html">Viikko 1</a></li>
<li><a href="../aikataulu/viikko2.html">Viikko 2</a></li>
<li><a href="../aikataulu/viikko3.html">Viikko 3</a></li>
<li><a href="../aikataulu/viikko4.html">Viikko 4</a></li>
<li><a href="../aikataulu/viikko5.html">Viikko 5</a></li>
<li><a href="../aikataulu/demo.html">Demotilaisuus</a></li>
<li><a href="../aikataulu/palautus.html">Työn palautus</a></li>
</ul></li>
<li><a href="../suunnittelu/index.html">Työn suunnittelu</a>
<ul>
<li><a href="../suunnittelu/aiheet/index.html">Työaiheet</a>
<ul>
<li><a href="../suunnittelu/aiheet/Drinkkiarkisto.html">Drinkkiarkisto</a></li>
<li><a href="../suunnittelu/aiheet/Elektroninen_keittokirja.html">Elektroninen keittokirja</a></li>
<li><a href="../suunnittelu/aiheet/Graduaiheet.html">Graduaiheet</a></li>
<li><a href="../suunnittelu/aiheet/Hiihtokisojen_tulospalvelu.html">Hiihtokisojen tulospalvelu</a></li>
<li><a href="../suunnittelu/aiheet/Huutokauppa.html">Huutokauppa</a></li>
<li><a href="../suunnittelu/aiheet/Kennelkerho.html">Kennelkerho</a></li>
<li><a href="../suunnittelu/aiheet/Keskustelufoorumi.html">Keskustelufoorumi</a></li>
<li><a href="../suunnittelu/aiheet/Kurssikysely.html">Kurssikysely</a></li>
<li><a href="../suunnittelu/aiheet/Kurssin_kotisivu.html">Kurssin kotisivu</a></li>
<li><a href="../suunnittelu/aiheet/Kurssitarjonta_ja_kurssipaikan_varaus.html">Kurssitarjonta ja kurssipaikan varaus</a></li>
<li><a href="../suunnittelu/aiheet/Laakariaseman_tyovuorolista.html">Lääkäriaseman työvuorolista</a></li>
<li><a href="../suunnittelu/aiheet/Laakarin_kotikaynnit.html">Lääkärin kotikäynnit</a></li>
<li><a href="../suunnittelu/aiheet/Matkojen_markkinointi.html">Matkojen markkinointi</a></li>
<li><a href="../suunnittelu/aiheet/Muistilista.html">Muistilista</a></li>
<li><a href="../suunnittelu/aiheet/Ostoskassi.html">Ostoskassi</a></li>
<li><a href="../suunnittelu/aiheet/Palvelubisnes.html">Palvelubisnes</a></li>
<li><a href="../suunnittelu/aiheet/Parturi-Kampaamo.html">Parturi-Kampaamo</a></li>
<li><a href="../suunnittelu/aiheet/Pizzapalvelu.html">Pizzapalvelu</a></li>
<li><a href="../suunnittelu/aiheet/Pokemon-kanta.html">Pokémon-tietokanta</a></li>
<li><a href="../suunnittelu/aiheet/Projektin_tyoaikaseuranta.html">Projektin työaikaseuranta</a></li>
<li><a href="../suunnittelu/aiheet/Rankkauslista.html">Rankkauslista</a></li>
<li><a href="../suunnittelu/aiheet/Taloyhtion_palvelut.html">Taloyhtiön palvelut</a></li>
<li><a href="../suunnittelu/aiheet/Tavaranvaihto.html">Tavaranvaihto</a></li>
<li><a href="../suunnittelu/aiheet/Tukkuliikkeen_tilaustenksittely.html">Tukkuliikkeen tilaustenkäsittely</a></li>
<li><a href="../suunnittelu/aiheet/Tutkimusaineston_kerays.html">Tutkimusaineiston keräys</a></li>
<li><a href="../suunnittelu/aiheet/Tyoaihekanta.html">Työaihekanta</a></li>
<li><a href="../suunnittelu/aiheet/Opintoneuvonnan_usein_kysytyt_kysymykset.html">Usein kysytyt kysymykset</a></li>
<li><a href="../suunnittelu/aiheet/Vedonlyonti.html">Vedonlyönti</a></li>
<li><a href="../suunnittelu/aiheet/Vuokra-asuntojen_valitys.html">Vuokra-asuntojen välitys</a></li>
<li><a href="../suunnittelu/aiheet/Ystavanvalityspalvelu.html">Ystävänvälityspalvelu</a></li>
<li><a href="../suunnittelu/aiheet/Aanestys.html">Äänestys</a></li>
</ul></li>
<li class="selected"><a href="../suunnittelu/ohjelmointikielet.html">Ohjelmointikielen valinta</a></li>
<li><a href="../suunnittelu/tietokannan-valinta.html">Tietokannan valinta</a></li>
<li><a href="../suunnittelu/kayttoliittyma.html">Käyttöliittymän suunnittelu</a></li>
<li><a href="../suunnittelu/tietokanta.html">Tietokannan suunnittelu</a></li>
</ul></li>
<li><a href="../pystytys/index.html">Users-palvelin ja töiden pystyttäminen</a>
<ul>
<li><a href="../pystytys/kayttoonotto/index.html">Palvelujen käynnistäminen ja käyttöönotto</a>
<ul>
<li><a href="../pystytys/kayttoonotto/java.html">Java ja Tomcatin käyttöönotto</a></li>
<li><a href="../pystytys/kayttoonotto/mysql.html">MySql-tietokannan käyttöönotto</a></li>
<li><a href="../pystytys/kayttoonotto/php.html">PHP-tuen käyttöönotto</a></li>
<li><a href="../pystytys/kayttoonotto/postgresql.html">PostgreSQL-tietokannan käyttöönotto</a></li>
</ul></li>
<li><a href="../pystytys/netbeans/index.html">NetBeansin käyttöönotto</a>
<ul>
<li><a href="../pystytys/netbeans/java.html">NetBeansin käyttö Javan kanssa</a></li>
<li><a href="../pystytys/netbeans/php.html">NetBeansin käyttö PHP:n kanssa</a></li>
<li><a href="../pystytys/netbeans/keyring-reset.html">Unlock your keyring? - Avainnippujen nollaus</a></li>
</ul></li>
<li><a href="../pystytys/postgres-ssh-tunneli.html">PostgreSql-kannan etäkäyttö</a></li>
<li><a href="../pystytys/java-war-paketit.html">Kotikoneella tehdyn Java-työn julkaisu</a></li>
<li><a href="../pystytys/php-virheet.html">PHP:n virheilmoitusten katselu</a></li>
<li><a href="../pystytys/nautilus-ssh.html">Tiedostojen etämuokkaus Linuxilla</a></li>
</ul></li>
<li><a href="../koodaaminen/index.html">Ohjelmointiohjeistus</a>
<ul>
<li><a href="../koodaaminen/html-opas.html">HTML-opas</a></li>
<li><a href="../koodaaminen/kannan-alustus.html">Tietokantataulujen pystyttäminen</a></li>
<li><a href="../koodaaminen/testisovellus.html">ConnectionTest-testisovellus</a></li>
<li><a href="../koodaaminen/tietokantayhteys/index.html">Tietokantayhteyden pystytys</a></li>
<li><a href="../koodaaminen/git-ja-salasanat.html">Git-repositoriot ja salasanat</a></li>
<li><a href="../koodaaminen/listaustesti/index.html">Yksinkertainen tietokantalistaus</a>
<ul>
<li><a href="../koodaaminen/listaustesti/java.html">Listaus Javalla</a></li>
<li><a href="../koodaaminen/listaustesti/php.html">Listaus PHP:llä</a></li>
</ul></li>
<li><a href="../koodaaminen/arkkitehtuuri/index.html">Arkkitehtuuri ja MVC</a>
<ul>
<li><a href="../koodaaminen/arkkitehtuuri/nyrkkisaannot.html">MVC-mallin nyrkisääntöjä</a></li>
</ul></li>
<li><a href="../koodaaminen/java/index.html">Java-ohjeet</a>
<ul>
<li><a href="../koodaaminen/java/rakenne.html">Sovelluksen rakenne ja servletit</a></li>
<li><a href="../koodaaminen/java/nakymat.html">Näkymien tekeminen ja JSP</a></li>
<li><a href="../koodaaminen/java/lomakkeet.html">Lomakkeiden käyttö ja vastaanottaminen</a></li>
<li><a href="../koodaaminen/java/istunnot.html">Istunnot ja kirjautumisen tallentaminen</a></li>
<li><a href="../koodaaminen/java/mallit_muokkaustoiminnot.html">Malliluokat ja tiedon muuttaminen</a></li>
<li><a href="../koodaaminen/java/muokkausnakymat.html">Muokkausnäkymän toteuttaminen</a></li>
</ul></li>
<li><a href="../koodaaminen/php/index.html">PHP-ohjeet</a>
<ul>
<li><a href="../koodaaminen/php/rakenne.html">Sovelluksen rakenne ja kontrollerit</a></li>
<li><a href="../koodaaminen/php/nakymat.html">Näkymien tekeminen</a></li>
<li><a href="../koodaaminen/php/lomakkeet.html">Lomakkeiden käyttö ja vastaanottaminen</a></li>
<li><a href="../koodaaminen/php/istunnot.html">Istunnot ja kirjautumisen tallentaminen</a></li>
<li><a href="../koodaaminen/php/mallit_muokkaustoiminnot.html">Malliluokat ja tiedon muuttaminen</a></li>
<li><a href="../koodaaminen/php/muokkausnakymat.html">Muokkausnäkymän toteuttaminen</a></li>
</ul></li>
</ul></li>
<li><a href="../arvosteluperusteet.html">Arvosteluperusteet</a></li>
<li><a href="../dokumentaatio-ohje.html">Dokumentaatio-ohje</a></li>
<li><a href="../cleancode.html">Hyvä ohjelmointityyli</a></li>
<li><a href="../kaytettavyys.html">Käytettävyys</a></li>
<li><a href="../sivukartta.html">Sivukartta</a></li>
<li><a href="../web-sovelluksista.html">Web-sovelluksien toiminta</a></li>
</ul></li>
</ul>
</nav>
</div>
<div class="col-md-6" id="content">
<header>
<h1 class="title">Ohjelmointikielen valinta</h1>
</header>
<!-- order: 2 -->

<p>Tietokantasovellukset kirjoitetaan yleensä joko Javalla tai PHP:llä. Nämä ovat myös tällä hetkellä laitoksen palvelimella tuetut kielet ja niillä tekemiseen pyritään kirjoittamaan ajantasaista dokumentaatiota. Tämä sivu käsittelee lähinnä näitä kahta kieltä. Sovelluksen voi halutessaan kirjoittaa myös esim. Pythonilla tai Rubyllä, kunhan sopii asiasta ohjaajan kanssa. Mitään kovin raskaita web-kirjastoja ei tällöinkään saa käyttää. Esim. Ruby on Rails ei käy.</p>
<p>Miettiessäsi jotain tuettujen kielien ulkopuolista kieltä, pitäydy mielummin kielissä ja kirjastoissa, jotka osaat jo ja joille on olemassa hyvä dokumentaatio. Liian esoteerisillä välineillä tehdyillä töillä on usein tapana jäädä kesken.</p>
<section id="java-ja-php" class="level2">
<h2>Java ja PHP</h2>
<p>Perussyntaksiltaan PHP ja Java ovat aika samanlaisia, sillä molemmat ovat perineet syntaksinsa C-kieleltä. PHP on tosin lainannut Perliltä tavan käyttää dollaria <code>$muuttujien</code> nimien edessä. Esimerkiksi luokka Kahvikuppi määriteltäisiin näissä kielissä seuraavasti:</p>
<div class="row">
<div class="col-md-6">
<p><strong>PHP</strong></p>
<pre class="sourceCode php"><code class="sourceCode php"><span class="kw">&lt;?php</span>

<span class="kw">class</span> Kahvikuppi {

  <span class="co">/* Luokkamuuttujat */</span>
  <span class="kw">private</span> <span class="kw">$tekstiKyljessa</span><span class="ot">;</span>
  <span class="kw">private</span> <span class="kw">$tayttoaste</span> = <span class="dv">0</span><span class="ot">;</span>
  
  <span class="co">/* Konstruktori */</span>
  <span class="kw">function</span> <span class="fu">__construct</span><span class="ot">(</span><span class="kw">$teksti</span><span class="ot">)</span> {
    <span class="kw">$this</span>-&gt;tekstiKyljessa = <span class="kw">$teksti</span><span class="ot">;</span>
  }
  
  <span class="co">/* Metodeja */</span>
  <span class="kw">function</span> kaadaKahvia<span class="ot">(</span><span class="kw">$maara</span><span class="ot">)</span> {
    <span class="kw">$this</span>-&gt;tayttoaste += <span class="kw">$maara</span><span class="ot">;</span>
    <span class="kw">if</span> <span class="ot">(</span><span class="kw">$this</span>-&gt;tayttoaste &gt; <span class="dv">100</span><span class="ot">)</span> {
      <span class="kw">throw</span> <span class="kw">new</span> <span class="kw">Exception</span><span class="ot">(</span><span class="st">&quot;Kahvikuppi valui yli&quot;</span><span class="ot">);</span>
    }
  }
  <span class="kw">function</span> juoTyhjaksi<span class="ot">()</span> {
    <span class="kw">$this</span>-&gt;tayttoaste = <span class="dv">0</span><span class="ot">;</span>
  }
  <span class="kw">function</span> getKahvinMaara<span class="ot">()</span> {
    <span class="kw">return</span> <span class="kw">$this</span>-&gt;tayttoaste<span class="ot">;</span>
  }
}</code></pre>
</div>
<div class="col-md-6">
<p><strong>Java</strong></p>
<pre class="sourceCode java"><code class="sourceCode java">

<span class="kw">class</span> Kahvikuppi {
  
  <span class="co">/* Luokkamuuttujat */</span>
  <span class="kw">private</span> String tekstiKyljessa
  <span class="kw">private</span> <span class="dt">int</span> tayttoaste = <span class="dv">0</span>;

  <span class="co">/* Konstruktori */</span>
  <span class="fu">Kahvikuppi</span>(String teksti) { 
    <span class="kw">this</span>.<span class="fu">tekstiKyljessa</span> = teksti;
  }
  
  <span class="co">/* Metodeja */</span>
  <span class="dt">void</span> <span class="fu">kaadaKahvia</span>(<span class="dt">int</span> maara) {
    tayttoaste += $maara;
    <span class="kw">if</span> (tayttoaste &gt; <span class="dv">100</span>) {
      <span class="kw">throw</span> <span class="kw">new</span> Exception(<span class="st">&quot;Kahvikuppi valui yli&quot;</span>);
    }
  }
  <span class="dt">void</span> <span class="fu">juoTyhjaksi</span>() {
    tayttoaste = <span class="dv">0</span>;
  }
  <span class="dt">int</span> <span class="fu">getKahvinMaara</span>() {
    <span class="kw">return</span> tayttoaste;
  }
}</code></pre>
</div>
</div>

<p>Kuten esimerkeistä voi huomata, kielet ovat normaalissa olio-ohjelmoinnissa melko samanlaisia. Suurin osa eroista on merkintätapaeroja, mutta eräs tärkeä ero esimerkistä näkyy. PHP:ssä ei koskaan määritetä muuttujalle tyyppiä, kuten Javassa tehdään. PHP:ssä muuttujaan voi sijoittaa minkätyyppistä dataa tahansa ja tietotyyppi voi jopa vaihdella ajon aikana. Muuttujia ei PHP:ssä myöskään tarvitse esitellä mitenkään. Esimerkkejä:</p>
<div class="row">
<div class="col-md-6">
<p><strong>PHP</strong></p>
<pre class="sourceCode php"><code class="sourceCode php"><span class="kw">&lt;?php</span>
<span class="kw">$luku</span> = <span class="dv">42</span><span class="ot">;</span>
<span class="kw">$nimi</span> = <span class="st">&quot;Pertti&quot;</span><span class="ot">;</span>
<span class="kw">$kuppi</span> = <span class="kw">new</span> Kahvikuppi<span class="ot">(</span><span class="st">&quot;Pertin kuppi&quot;</span><span class="ot">);</span>

<span class="co">//PHP:ssä tämäkin on mahdollista,</span>
<span class="co">//mutta ei suositeltavaa:</span>
<span class="kw">$luku</span> = <span class="kw">$nimi</span><span class="ot">;</span>

<span class="co">//Seuraavakaan ei vielä kaada ohjelmaa.</span>
<span class="co">//Muuttuja $luku saa arvokseen null</span>
<span class="kw">$luku</span> = <span class="kw">$nemi</span><span class="ot">;</span></code></pre>
</div>
<div class="col-md-6">
<p><strong>Java</strong></p>
<pre class="sourceCode java"><code class="sourceCode java">
<span class="dt">int</span> luku = <span class="dv">42</span>;
String nimi = <span class="st">&quot;Pertti&quot;</span>;
Kahvikuppi kuppi = <span class="kw">new</span> <span class="fu">Kahvikuppi</span>(<span class="st">&quot;Pertin kuppi&quot;</span>);

<span class="co">//Seuraavaa riviä on mahdotonta</span>
<span class="co">//saada kääntymään:</span>
luku = nimi;

<span class="co">//Tämäkään ei käänny. Muuttujaa</span>
<span class="co">//nemi ei ole esitelty!</span>
luku = nemi;</code></pre>
</div>
</div>

<p>Aiheesta lisää informaatiota <a href="http://www.php.net/manual/en/language.types.type-juggling.php">PHP:n manuaalissa</a></p>
<p>Javaa koodatessa joutuu kirjoittamaan hieman enemmän, mutta PHP:llä saattaa varsinkin aluksi tehdä tyyppivirheitä, jotka huomaa vasta ajon aikana.</p>
<section id="htmln-käyttö" class="level3">
<h3>HTML:n käyttö</h3>
<p>Toinen huomionarvoinen seikka PHP:tä kirjoittaessa on kielen käyttämät <em>&lt;?php-tägit</em>, jotka aloittavat PHP-koodin. Niiden ulkopuolella olevan tekstin PHP oletuksena tulostaa sellaisenaan. Tämä tekee PHP:n käyttämisestä yksinkertaisten nettisivujen tekemiseen erittäin helppoa:</p>
<p><strong>helloworld.php</strong></p>
<pre class="sourceCode php"><code class="sourceCode php"><span class="kw">&lt;?php</span>
  <span class="fu">header</span><span class="ot">(</span><span class="st">&quot;Content-type: text/html;charset=UTF-8&quot;</span><span class="ot">);</span>
  <span class="kw">$pagetitle</span> =  <span class="st">&quot;Hello World!&quot;</span><span class="ot">;</span>
<span class="kw">?&gt;</span>&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;<span class="kw">&lt;?php</span> <span class="fu">echo</span> <span class="kw">$pagetitle</span><span class="ot">;</span> <span class="kw">?&gt;</span>&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;<span class="kw">&lt;?php</span> <span class="fu">echo</span> <span class="kw">$pagetitle</span><span class="ot">;</span> <span class="kw">?&gt;</span>&lt;/h1&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>Yllä oleva sivu toimii sellaisenaan, kun osoittaa selaimensa osoitteeseen, jossa helloworld.php-tiedosto sijaitsee. Esim. <code>sivusto.fi/php-sovelluksen/osoite/helloworld.php</code>. Javalla vastaavan tekeminen on hieman monimutkaisempaa ja vaatii Servlet-luokan ja template-tiedoston:</p>
<p><strong>src/java/servlets/HelloWorldServlet.java</strong></p>
<pre class="sourceCode java"><code class="sourceCode java"><span class="kw">package servlets;</span>

<span class="kw">import java.io.IOException;</span>
<span class="kw">import javax.servlet.RequestDispatcher;</span>
<span class="kw">import javax.servlet.ServletException;</span>
<span class="kw">import javax.servlet.annotation.WebServlet;</span>
<span class="kw">import javax.servlet.http.HttpServlet;</span>
<span class="kw">import javax.servlet.http.HttpServletRequest;</span>
<span class="kw">import javax.servlet.http.HttpServletResponse;</span>

<span class="fu">@WebServlet</span>(name = <span class="st">&quot;HelloWorldServlet&quot;</span>, urlPatterns = {<span class="st">&quot;/HelloWorld&quot;</span>})
<span class="kw">public</span> <span class="kw">class</span> HelloWorldServlet <span class="kw">extends</span> HttpServlet {

    <span class="fu">@Override</span>
    <span class="kw">protected</span> <span class="dt">void</span> <span class="fu">doGet</span>(HttpServletRequest request, HttpServletResponse response)
            <span class="kw">throws</span> ServletException, IOException {
        response.<span class="fu">setContentType</span>(<span class="st">&quot;text/html;charset=UTF-8&quot;</span>);
        request.<span class="fu">setAttribute</span>(<span class="st">&quot;title&quot;</span>, <span class="st">&quot;Hello world!&quot;</span>);
        
        RequestDispatcher dispatcher = request.<span class="fu">getRequestDispatcher</span>(<span class="st">&quot;helloworld.jsp&quot;</span>);
        dispatcher.<span class="fu">forward</span>(request, response);
    }

}</code></pre>
<p><strong>web/helloworld.jsp</strong></p>
<pre class="sourceCode html"><code class="sourceCode html"><span class="er">&lt;</span>%@page contentType=&quot;text/html&quot; pageEncoding=&quot;UTF-8&quot;%&gt;
<span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span>
<span class="kw">&lt;html&gt;</span>
  <span class="kw">&lt;head&gt;</span>
    <span class="kw">&lt;title&gt;</span>${title}<span class="kw">&lt;/title&gt;</span>
  <span class="kw">&lt;/head&gt;</span>
  <span class="kw">&lt;body&gt;</span>
    <span class="kw">&lt;h1&gt;</span>${title}<span class="kw">&lt;/h1&gt;</span>
  <span class="kw">&lt;/body&gt;</span>
<span class="kw">&lt;/html&gt;</span></code></pre>
<p>Ylläoleva ohjelma käynnistyy melko lailla PHP-esimerkin tapaan osoitteessa <code>sivusto.fi/java-sovelluksen/osoite/HelloWorld</code>. Tässä käytetty JSP-tiedostoformaatti on Javan-vastaus PHP:n suoraviivaiselle tavalle käsitellä HTML:n tulostusta ja sitä on varsin yksinkertaista käyttää.</p>
<p>Itse Java-ohjelmakoodi sensijaan on aika monimutkaista ja käyttää taustalla suurta määrää Javan kirjastoja. Tätä ei kovin moni jaksaisi kirjoittaa, siksi ylläolevasta koodista suurin osa onkin NetBeansin autogeneroimaa, eikä kaikkea onneksi tarvitse kirjoittaa itse.</p>
<p>PHP on kielenä optimoitu nopeaan nettisivustojen kasaamiseen. Suuremmilla sivustoilla ja monimutkaisempia kehyksiä käytettäessä PHP-koodikin alkaa muistuttaa yllä olevaa Java-koodia ja pitenee ja monimutkaistuu merkittävästi. Yleisenä nyrkkisääntönä kuitenkin on, että pienikokoisempiin web-projekteihin - esimerkiksi tietokantasovelluksiin - Java-koodia joutuu kirjoittamaan enemmän kuin vastaaviin PHP:llä tehtyihin sovelluksiin.</p>
</section>
<section id="tietokannan-käyttö" class="level3">
<h3>Tietokannan käyttö</h3>
<p>Sekä PHP että Java hoitavat tietokannan käytön oliopohjaisesti tavalla, joka mahdollistaa kielen sisäisten muuttujien upottamisen SQL-lausekkeisiin helposti ja tietoturvallisesti.</p>
<p><strong>tietokanta.php</strong></p>
<pre class="sourceCode php"><code class="sourceCode php"><span class="kw">&lt;?php</span>
  <span class="co">//Otetaan yhteys mysql-tietokantaan</span>
  <span class="kw">$yhteys</span> = <span class="kw">new</span> <span class="kw">PDO</span><span class="ot">(</span><span class="st">&quot;mysql:host=localhost;dbname=tietokannan_nimi&quot;</span><span class="ot">,</span> <span class="st">&quot;kayttaja&quot;</span><span class="ot">,</span> <span class="st">&quot;salasana&quot;</span><span class="ot">);</span>

  <span class="co">//Suoritetaan sql-kysely. Haetaan täysi-ikäiset Lehtoset tietokannasta</span>
  <span class="kw">$sql</span> = <span class="st">&quot;SELECT id, nimi, osoite FROM kayttajat WHERE ika &gt;= ? and sukunimi = ?&quot;</span><span class="ot">;</span>
  <span class="kw">$kysely</span> = <span class="kw">$yhteys</span>-&gt;prepare<span class="ot">(</span><span class="kw">$sql</span><span class="ot">);</span>
  <span class="kw">$tulokset</span> = <span class="kw">$kysely</span>-&gt;execute<span class="ot">(</span><span class="fu">array</span><span class="ot">(</span><span class="dv">18</span><span class="ot">,</span><span class="st">&quot;Lehtonen&quot;</span><span class="ot">));</span>

  <span class="co">//Tulostetaan tietoja löydetyistä käyttäjistä</span>
  <span class="kw">while</span><span class="ot">(</span><span class="kw">$rivi</span> = <span class="kw">$tulokset</span>-&gt;fetchObject<span class="ot">())</span> {
    <span class="fu">echo</span> <span class="st">&quot;Käyttäjän </span><span class="kw">$rivi</span><span class="st">-&gt;etunimi </span><span class="kw">$rivi</span><span class="st">-&gt;sukunimi ikä on </span><span class="kw">$rivi</span><span class="st">-&gt;ika&quot;</span><span class="ot">;</span>
  }

  <span class="co">//PHP sulkee yhteydet ja resurssit automaattisesti</span>
  <span class="co">//suorituksen päätteeksi</span></code></pre>
<p><strong>tietokanta.java</strong></p>
<pre class="sourceCode java"><code class="sourceCode java"><span class="kw">import java.sql.Connection;</span>
<span class="kw">import java.sql.PreparedStatement;</span>
<span class="kw">import java.sql.ResultSet;</span>
<span class="kw">import java.sql.SQLException;</span>
<span class="kw">import javax.naming.Context;</span>
<span class="kw">import javax.naming.InitialContext;</span>
<span class="kw">import javax.naming.NamingException;</span>
<span class="kw">import javax.sql.DataSource;</span>

Connection yhteys = <span class="kw">null</span>;
PreparedStatement kysely = <span class="kw">null</span>;
ResultSet tulokset = <span class="kw">null</span>;

<span class="kw">class</span> Tietokanta {

  <span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">teeAsioitaKannalla</span>() <span class="kw">throws</span> Exception {
    <span class="kw">try</span> {
      <span class="co">//Haetaan context-xml-tiedostosta tietokannan yhteystiedot</span>
      <span class="co">//HUOM! Tämä esimerkki ei toimi sellaisenaan ilman Tomcat-palvelinta!</span>
      Context ctx = <span class="kw">new</span> InitialContext();
      DataSource yhteysVarasto = (DataSource) ctx.<span class="fu">lookup</span>(<span class="st">&quot;java:/comp/env/jdbc/tietokanta&quot;</span>);

      <span class="co">//Otetaan yhteys tietokantaan</span>
      yhteys = yhteysVarasto.<span class="fu">getConnection</span>();

      <span class="co">//Suoritetaan sql-kysely. Haetaan täysi-ikäiset Lehtoset tietokannasta</span>
      String sql = <span class="st">&quot;SELECT etunimi, sukunimi, ika FROM kayttajat WHERE ika &gt;= ? and sukunimi = ?&quot;</span>;
      kysely = yhteys.<span class="fu">prepareStatement</span>(sql);
      kysely.<span class="fu">setInteger</span>(<span class="dv">1</span>, <span class="dv">18</span>);
      kysely.<span class="fu">setString</span>(<span class="dv">2</span>, <span class="st">&quot;Lehtonen&quot;</span>);
      tulokset = kysely.<span class="fu">executeQuery</span>();

      <span class="co">//Tulostetaan tietoja löydetyistä käyttäjistä</span>
      <span class="kw">while</span>(tulokset.<span class="fu">next</span>()) {
        String nimi = tulokset.<span class="fu">getString</span>(<span class="st">&quot;etunimi&quot;</span>) + <span class="st">&quot; &quot;</span> +tulokset.<span class="fu">getString</span>(<span class="st">&quot;sukunimi&quot;</span>);
        <span class="dt">int</span> ika = tulokset.<span class="fu">getString</span>(<span class="st">&quot;ika&quot;</span>);
        System.<span class="fu">out</span>.<span class="fu">println</span>(<span class="st">&quot;Käyttäjän &quot;</span>+nimi+<span class="st">&quot; ikä on &quot;</span>+ika);
      }

    } <span class="kw">catch</span> (Exception e) {
      <span class="kw">throw</span> e;
    } <span class="kw">finally</span> {
      <span class="co">//Suljetaan lopulta kaikki avatut resurssit</span>
      <span class="kw">try</span> { tulokset.<span class="fu">close</span>(); } <span class="kw">catch</span> (Exception e) {  }
      <span class="kw">try</span> { kysely.<span class="fu">close</span>(); } <span class="kw">catch</span> (Exception e) {  }
      <span class="kw">try</span> { yhteys.<span class="fu">close</span>(); } <span class="kw">catch</span> (Exception e) {  }
    }
  }
}</code></pre>
<p>Yllä oleva Java-koodi hakee tietokannan tiedot xml-tiedostosta:</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;?xml</span> version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;<span class="kw">?&gt;</span>
<span class="kw">&lt;Context</span><span class="ot"> antiJARLocking=</span><span class="st">&quot;true&quot;</span><span class="ot"> path=</span><span class="st">&quot;/Kissalista-java&quot;</span><span class="kw">&gt;</span>
    <span class="kw">&lt;Resource</span><span class="ot"> name=</span><span class="st">&quot;jdbc/tietokanta&quot;</span><span class="ot"> auth=</span><span class="st">&quot;Container&quot;</span>
<span class="ot">        type=</span><span class="st">&quot;javax.sql.DataSource&quot;</span><span class="ot"> removeAbandoned=</span><span class="st">&quot;true&quot;</span>
<span class="ot">        removeAbandonedTimeout=</span><span class="st">&quot;30&quot;</span><span class="ot"> maxActive=</span><span class="st">&quot;100&quot;</span>
<span class="ot">        maxIdle=</span><span class="st">&quot;30&quot;</span><span class="ot"> maxWait=</span><span class="st">&quot;10000&quot;</span><span class="ot"> username=</span><span class="st">&quot;tunnus&quot;</span>
<span class="ot">        password=</span><span class="st">&quot;salasana&quot;</span>
<span class="ot">        driverClassName=</span><span class="st">&quot;org.postgresql.Driver&quot;</span>
<span class="ot">        url=</span><span class="st">&quot;jdbc:postgresql://localhost/tietokannan_nimi&quot;</span> <span class="kw">/&gt;</span>
<span class="kw">&lt;/Context&gt;</span></code></pre>
<p>PHP on tässäkin tapauksessa merkittävästi vähäsanaisempi. Taitava koodari lyhentää yllä olevasta esimerkistä toistuvat koodinpätkät kuitenkin yleiskäyttöisiin metodeihin, jolloin lopullisessa käytössä eri kielten tapa käsitellä tietokantaa on lähestulkoon yhtä monisanainen. Lisäksi Javan versiossa 7 resurssien sulkemisesta on <a href="http://stackoverflow.com/questions/9260159/java-7-automatic-resource-management-jdbc">tehty automaattisempaa</a>. Valitettavasti tosin laitoksen palvelimilla oleva versio ei ole vielä ajan tasalla.</p>
</section>
</section>
<section id="yhteenveto" class="level2">
<h2>Yhteenveto</h2>
<p>Kumpaa sitten kannattaa käyttää? Sitä mikä tuntuu kotoisimmalta ja luonnollisemmalta. Tätä nykyä suurin osa valitsee PHP:n sen keveyden takia, mutta kumpaankin kieleen on tarjolla varsin mallikkaat välineistöt tietokantasovelluksen tekemiseen.</p>
<table class="table table-striped table-bordered">
<thead>
<tr class="header">
<th style="text-align: left;">Ominaisuus</th>
<th style="text-align: left;">Java</th>
<th style="text-align: left;">PHP</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Ajotapa</td>
<td style="text-align: left;">Käännetään ennen ajoa</td>
<td style="text-align: left;">Tulkitaan ajonaikaisesti</td>
</tr>
<tr class="even">
<td style="text-align: left;">Tyyppijärjestelmä</td>
<td style="text-align: left;">Vahva tyypitys</td>
<td style="text-align: left;">Heikko tyypitys</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HTML:n tuottaminen</td>
<td style="text-align: left;">JSP-kielellä</td>
<td style="text-align: left;">Suoraan PHP-koodin sisällä</td>
</tr>
<tr class="even">
<td style="text-align: left;">Konfigurointi</td>
<td style="text-align: left;">Lukuisilla XML-tiedostoilla</td>
<td style="text-align: left;">Monia tapoja. Mahdollista suoraan koodissa.</td>
</tr>
</tbody>
</table>
<p>Voit tutustua myös Sami Saadan tekemiin esimerkkisovelluksiin <a href="https://github.com/tsoha-syksy2012/ostoslista-esimerkki/tree/php-raaka">PHP</a> ja <a href="https://github.com/tsoha-syksy2012/ostoslista-esimerkki/tree/java-servlet">Java-kielellä</a>. Bonuksena samasta aiheesta on olemassa myös hyvin tiivis <a href="https://github.com/tsoha-syksy2012/ostoslista-esimerkki/tree/ruby_sinatra_sequel">Ruby-toteutus</a> Sinatra-kehyksellä tehtynä.</p>
<p>Linkkejä:</p>
<ul>
<li><a href="http://docs.oracle.com/javaee/">Javan EE dokumentaatio</a></li>
<li><a href="http://www.php.net/manual/en/">PHP:n dokumentaatio</a></li>
</ul>
<section class="alert alert-success small"><h3>
Seuraavaksi:
</h3>
<p>Kun olet valinnut aiheesi ja mieleisen ohjelmointikielen, vilkaise <a href="tietokannan-valinta.html">tietokannan valitsemista</a>.</p>
</section>




</section>
</div>
</div> 
</div> 
<footer>
  <a href="../sivukartta.html">Sivukartta</a> - 
  <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">AdvancedKittenry</span> 
  by
  <a xmlns:cc="http://creativecommons.org/ns#" href="http://advancedkittenry.github.io/credits.html" property="cc:attributionName" rel="cc:attributionURL">David Consuegra and others</a>
  is licensed under a 
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">
    <img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/80x15.png" />
  </a>
</footer>
</body>
</html>
