<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>ConnectionTest-testisovellus</title>
  <style type="text/css">code{white-space: pre;}</style>
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>
  <link rel="stylesheet" href="../css/base.css">
  <link rel="icon" href="../images/kissa.png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <script src="../javascript/jquery.min.js"></script>
  <script src="../javascript/bootstrap.js"></script>
  <script src="../javascript/jquery.treeview.js"></script>
  <script src="../javascript/jquery.scrollTo.js"></script>
  <script src="../javascript/jquery.nav.js"></script>
  <script src="../javascript/navi.js"></script>
</head>
<body>
<div class="titlebar">
  <div class="container">
    <div class="row">
      <h1 class="col-md-6 col-md-offset-3">Advanced Kittenry - Tietokantasovellusohjeet</h1>
    </div>
  </div>
</div>
<div class="container">
<div class="row">
<div class="navcontainer col-md-3">
<nav>
<ul>
<li><a href="../index.html">Tietokantasovellus</a>
<ul>
<li><a href="../aikataulu/index.html">Aikataulu</a>
<ul>
<li><a href="../aikataulu/viikkopalautukset/index.html">Viikottaiset palautukset</a>
<ul>
<li><a href="../aikataulu/viikkopalautukset/esittelysivu.html">Työn esittelysivu</a></li>
<li><a href="../aikataulu/viikkopalautukset/viikko1.html">Viikko 1</a></li>
<li><a href="../aikataulu/viikkopalautukset/viikko2.html">Viikko 2</a></li>
<li><a href="../aikataulu/viikkopalautukset/viikko3.html">Viikko 3</a></li>
<li><a href="../aikataulu/viikkopalautukset/viikko4.html">Viikko 4</a></li>
<li><a href="../aikataulu/viikkopalautukset/viikko5.html">Viikko 5</a></li>
</ul></li>
<li><a href="../aikataulu/koodikatselmointi.html">Koodikatselmointi</a></li>
<li><a href="../aikataulu/demo.html">Demotilaisuus</a></li>
<li><a href="../aikataulu/palautus.html">Työn palautus</a></li>
</ul></li>
<li><a href="../suunnittelu_ja_tyoymparisto/index.html">Työn suunnittelu ja työympäristön pystytys</a>
<ul>
<li><a href="../suunnittelu_ja_tyoymparisto/aiheet/index.html">Työaiheet</a>
<ul>
<li><a href="../suunnittelu_ja_tyoymparisto/aiheet/Drinkkiarkisto.html">Drinkkiarkisto</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/aiheet/Elektroninen_keittokirja.html">Elektroninen keittokirja</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/aiheet/Graduaiheet.html">Graduaiheet</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/aiheet/Henkilogalleria.html">Henkilögalleria</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/aiheet/Hiihtokisojen_tulospalvelu.html">Hiihtokisojen tulospalvelu</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/aiheet/Huutokauppa.html">Huutokauppa</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/aiheet/Kennelkerho.html">Kennelkerho</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/aiheet/Keskustelufoorumi.html">Keskustelufoorumi</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/aiheet/Kurssikysely.html">Kurssikysely</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/aiheet/Kurssin_kotisivu.html">Kurssin kotisivu</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/aiheet/Kurssitarjonta_ja_kurssipaikan_varaus.html">Kurssitarjonta ja kurssipaikan varaus</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/aiheet/Laakariaseman_tyovuorolista.html">Lääkäriaseman työvuorolista</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/aiheet/Laakarin_kotikaynnit.html">Lääkärin kotikäynnit</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/aiheet/Matkojen_markkinointi.html">Matkojen markkinointi</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/aiheet/Muistilista.html">Muistilista</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/aiheet/Ostoskassi.html">Ostoskassi</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/aiheet/Palvelubisnes.html">Palvelubisnes</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/aiheet/Parturi-Kampaamo.html">Parturi-Kampaamo</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/aiheet/Pizzapalvelu.html">Pizzapalvelu</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/aiheet/Pokemon-kanta.html">Pokémon-tietokanta</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/aiheet/Projektin_tyoaikaseuranta.html">Projektin työaikaseuranta</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/aiheet/Rankkauslista.html">Rankkauslista</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/aiheet/Taloyhtion_palvelut.html">Taloyhtiön palvelut</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/aiheet/Tavaranvaihto.html">Tavaranvaihto</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/aiheet/Tukkuliikkeen_tilaustenksittely.html">Tukkuliikkeen tilaustenkäsittely</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/aiheet/Tutkimusaineston_kerays.html">Tutkimusaineiston keräys</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/aiheet/Tyoaihekanta.html">Työaihekanta</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/aiheet/Opintoneuvonnan_usein_kysytyt_kysymykset.html">Usein kysytyt kysymykset</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/aiheet/Vedonlyonti.html">Vedonlyönti</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/aiheet/Vuokra-asuntojen_valitys.html">Vuokra-asuntojen välitys</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/aiheet/Ystavanvalityspalvelu.html">Ystävänvälityspalvelu</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/aiheet/Aanestys.html">Äänestys</a></li>
</ul></li>
<li><a href="../suunnittelu_ja_tyoymparisto/ohjelmointikielet.html">Ohjelmointikielen valinta</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/tietokannan-valinta.html">Tietokannan valinta</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/git.html">Versionhallinnan käyttöönotto</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/alkudokumentointi.html">Perusasioiden dokumentointi</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/users/index.html">Users-palvelin ja töiden pystyttäminen</a>
<ul>
<li><a href="../suunnittelu_ja_tyoymparisto/users/java.html">Java ja Tomcatin käyttöönotto</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/users/php.html">PHP-tuen käyttöönotto</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/users/mysql.html">MySql-tietokannan käyttöönotto</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/users/postgresql.html">PostgreSQL-tietokannan käyttöönotto</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/users/postgres-ssh-tunneli.html">PostgreSql-kannan etäkäyttö</a></li>
</ul></li>
<li><a href="../suunnittelu_ja_tyoymparisto/netbeans/index.html">NetBeansin käyttöönotto</a>
<ul>
<li><a href="../suunnittelu_ja_tyoymparisto/netbeans/java.html">NetBeansin käyttö Javan kanssa</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/netbeans/php.html">NetBeansin käyttö PHP:n kanssa</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/netbeans/keyring-reset.html">Unlock your keyring? - Avainnippujen nollaus</a></li>
</ul></li>
<li><a href="../suunnittelu_ja_tyoymparisto/etamuokkaus.html">Tiedostojen etämuokkaus Linuxilla</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/kayttoliittyma.html">Käyttöliittymän suunnittelu</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/kayttoliittyman_toteutus.html">Käyttöliittymädemon toteuttaminen</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/tietokanta.html">Tietokannan suunnittelu</a></li>
<li><a href="../suunnittelu_ja_tyoymparisto/tietokanta-dokumentointi.html">Tietokannan dokumentointi</a></li>
</ul></li>
<li><a href="../koodaaminen/index.html">Ohjelmointiohjeistus</a>
<ul>
<li><a href="../koodaaminen/kannan-alustus.html">Tietokantataulujen pystyttäminen</a></li>
<li class="selected"><a href="../koodaaminen/testisovellus.html">ConnectionTest-testisovellus</a></li>
<li><a href="../koodaaminen/git-ja-salasanat.html">Git-repositoriot ja salasanat</a></li>
<li><a href="../koodaaminen/arkkitehtuuri/index.html">Arkkitehtuuri ja MVC</a>
<ul>
<li><a href="../koodaaminen/arkkitehtuuri/nyrkkisaannot.html">MVC-mallin nyrkisääntöjä</a></li>
</ul></li>
<li><a href="../koodaaminen/java/index.html">Java-ohjeet</a>
<ul>
<li><a href="../koodaaminen/java/tietokantayhteys.html">Tietokantayhteyden pystytys</a></li>
<li><a href="../koodaaminen/java/listaustesti.html">Listaustesti</a></li>
<li><a href="../koodaaminen/java/rakenne.html">Sovelluksen rakenne ja servletit</a></li>
<li><a href="../koodaaminen/java/nakymat.html">Näkymien tekeminen ja JSP</a></li>
<li><a href="../koodaaminen/java/lomakkeet.html">Lomakkeiden käyttö ja vastaanottaminen</a></li>
<li><a href="../koodaaminen/java/mallit_tiedonhaku.html">Tietokantahaku ja kyselyn parametrit</a></li>
<li><a href="../koodaaminen/java/istunnot.html">Istunnot ja kirjautumisen tallentaminen</a></li>
<li><a href="../koodaaminen/java/listausnakymat.html">Listaus- ja tietonäkymät</a></li>
<li><a href="../koodaaminen/java/sivutusjahaut.html">Sivutus ja hakulomakkeet</a></li>
<li><a href="../koodaaminen/java/mallit_lisays.html">Tietojen syöttäminen kantaan</a></li>
<li><a href="../koodaaminen/java/muokkausnakymat.html">Muokkausnäkymän toteuttaminen</a></li>
<li><a href="../koodaaminen/java/java-war-paketit.html">Kotikoneella tehdyn Java-työn julkaisu</a></li>
<li><a href="../koodaaminen/java/tomcatin-korjaaminen.html">Tomcatin ongelmien ratkominen</a></li>
</ul></li>
<li><a href="../koodaaminen/php/index.html">PHP-ohjeet</a>
<ul>
<li><a href="../koodaaminen/php/tietokantayhteys.html">Tietokantayhteyden pystytys</a></li>
<li><a href="../koodaaminen/php/listaustesti.html">Listaustesti</a></li>
<li><a href="../koodaaminen/php/rakenne.html">Sovelluksen rakenne ja kontrollerit</a></li>
<li><a href="../koodaaminen/php/nakymat.html">Näkymien tekeminen</a></li>
<li><a href="../koodaaminen/php/lomakkeet.html">Lomakkeiden käyttö ja vastaanottaminen</a></li>
<li><a href="../koodaaminen/php/mallit_tiedonhaku.html">Tietokantahaku ja kyselyn parametrit</a></li>
<li><a href="../koodaaminen/php/istunnot.html">Istunnot ja kirjautumisen tallentaminen</a></li>
<li><a href="../koodaaminen/php/listausnakymat.html">Listaus- ja tietonäkymät</a></li>
<li><a href="../koodaaminen/php/sivutusjahaut.html">Sivutus ja hakulomakkeet</a></li>
<li><a href="../koodaaminen/php/mallit_lisays.html">Tietojen syöttäminen kantaan</a></li>
<li><a href="../koodaaminen/php/muokkausnakymat.html">Muokkausnäkymän toteuttaminen</a></li>
<li><a href="../koodaaminen/php/syntaksiopas.html">Lyhyt PHP-opas Java-koodarille</a></li>
<li><a href="../koodaaminen/php/php-virheet.html">PHP:n virheilmoitusten katselu</a></li>
</ul></li>
</ul></li>
<li><a href="../arvosteluperusteet.html">Arvosteluperusteet</a></li>
<li><a href="../dokumentaatio-ohje.html">Dokumentaatio-ohje</a></li>
<li><a href="../cleancode.html">Hyvä ohjelmointityyli</a></li>
<li><a href="../kaytettavyys.html">Käytettävyys</a></li>
<li><a href="../sivukartta.html">Sivukartta</a></li>
<li><a href="../web-sovelluksista.html">Web-sovelluksien toiminta</a></li>
</ul></li>
</ul>
</nav>
</div>
<div class="col-md-6" id="content">
<header>
<h1 class="title">ConnectionTest-testisovellus</h1>
</header>
<!-- order: 2 -->
<!-- tags: viikko2 -->
<p>Yhteystestiohjelma <em>ConnectionTest</em> on pieni tiivis ohjelmapaketti, jolla sekä kurssilainen että ohjaaja pystyvät tarkastelemaan työssä käytetyn tietokannan tilaa ja testaamaan tietokantayhteyttä.</p>
<p>Sovellus osaa myös ilmoittaa alkeellisella tasolla toimiiko yhteys ja mikä meni pieleen, jos yhteys ei toimi.</p>
<p>ConnectionTest ei ole varsinaisesti osa tietokantasovellustasi, vaan sen tarkoitus on toimia työkaluna tietokannan kanssa säätämiseen. Joillekin suora tietokantakomentorivin käyttö voi olla nopeampaa, joskaan ohjaajasi ei tätä tapaa sinun kantaasi pysty käyttämään.</p>
<section class="alert alert-danger">
<h3>
Pidä mielessä!
</h3>
<p>Ladatessasi testisovelluksen tulet ajaneeksi omilla tunnuksillasi vierasta koodia. Varmista aina että lataat koodia luotettavasti lähteestä.</p>
<p>ConnectionTest-ohjelma on kurssin ohjaajien ylläpitämä ja tarkoitettu täysin harmittomaksi työkaluksi. Kurssin ohjaajat eivät kuitenkaan ota mitään vastuuta siitä, että ohjelman käytön jälkeen leivänpaahtimesi syö kissasi tai mistään muistakaan ohjelman mahdollisesti tuottamista ikävyyksistä. Ohjelmaa kuitenkin pyritään kehittämään, mikäli siitä löytyy bugeja.</p>
<p>Toisinsanoen: Käyttö omalla vastuulla. Bugiraportteja otetaan mieluusti vastaan.</p>
</section>
<p>Ohjelman lähdekoodia voi tutkia myös <a href="https://github.com/AdvancedKittenry/connectionTest">githubissa</a>, joskaan koodi ei ole aivan kaikista selkeintä mahdollista, johtuen yrityksistä pitää sovellus mahdollisimman tiiviinä. Ei siis välttämättä kannata ottaa testisovelluksen arkkitehtuurista oppia omaan työhön.</p>
<section id="php-testisovellus" class="level2">
<h2>PHP-testisovellus</h2>
<p>PHP:llä toimiva testisovellus on helppokäyttöisyyden nimissä mahdutettu yhteen tiedostoon ja sen voi ladata osoitteesta <a href="https://raw.github.com/AdvancedKittenry/connectionTest/master/php/connectiontest.php" class="uri">https://raw.github.com/AdvancedKittenry/connectionTest/master/php/connectiontest.php</a></p>
<p>Eräs tapa asentaa sovellus on kirjautua usersille ja syöttää komentoriville</p>
<pre><code>cd ~/htdocs
wget https://raw.github.com/AdvancedKittenry/connectionTest/master/php/connectiontest.php
</code></pre>
<p>Avaa tämän jälkeen sovellus jollain ohjelmalla (esim. nano) ja korjaa sen ensimmäisillä riveillä olevat tietokantatunnukset omiksesi. Korjausta vaativissa kohdissa lukee isolla FIXME.</p>
</section>
<section id="java-testisovellus" class="level2">
<h2>Java-testisovellus</h2>
<p>Testisovelluksen Java-versio on helpointa asentaa war-pakettina.</p>
<p>Voit ladata paketin <a href="https://raw.github.com/AdvancedKittenry/connectionTest/master/java/dist/ConnectionTest.war">githubista</a>. Paketti on valitettavasti aika iso, sillä siihen on sisällytetty kaikki tarvittavat tietokanta-ajurit. Noudata paketin ladattuasi <a href="../koodaaminen/java/java-war-paketit.html">asennusohjeita täältä</a>.</p>
<p>Kun paketti on asennettu usersille sinun pitää vielä säätää XML-tiedostosta tietokannan yhteystiedot oikeiksi. Tomcat tekee tiedostosta oman kopionsa oletuksena polkuun <code>tomcat/conf/Catalina/localhost/ConnectionTest.xml</code>.</p>
<p>Avaa tämä XML-tiedosto jollain ohjelmalla (esim. nano) ja korjaa siinä olevat tietokantatunnukset omiksesi. Korjausta vaativia kohtia on kolme ja niissä lukee isolla FIXME. Tee muutoksia vain näihin kohtiin.</p>
<p>Jos teet projektia Users-palvelimella ja käytät Postgresql-tietokantaa, täytä kohdat seuraavasti: “username” on yliopiston käyttäjätunnuksesi, ja kohdassa “password”-kysytyn salasanan löydät Users-palvelimen kotihakemistostasi tiedostosta nimeltä <code>.psql_password</code>. Viimeinen kohta, <code>url=&quot;jdbc:postgresql://localhost/FIXME_dbname&quot;</code> kertoo Tomcatille tietokannan sijainnin ja nimen. Users-palvelimella tietokannan nimi on aina oma käyttäjätunnuksesi.</p>
<p>Esimerkiksi tunnuksella kumikumi ja tietokannan salasanalla abc123 näyttää xml-tiedoston sisältö seuraavalta:</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;?xml</span> version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;<span class="kw">?&gt;</span>
<span class="kw">&lt;Context</span><span class="ot"> antiJARLocking=</span><span class="st">&quot;true&quot;</span><span class="ot"> path=</span><span class="st">&quot;/ConnectionTest&quot;</span><span class="kw">&gt;</span>
    <span class="kw">&lt;Resource</span><span class="ot"> name=</span><span class="st">&quot;jdbc/tietokanta&quot;</span><span class="ot"> auth=</span><span class="st">&quot;Container&quot;</span>
<span class="ot">        type=</span><span class="st">&quot;javax.sql.DataSource&quot;</span><span class="ot"> removeAbandoned=</span><span class="st">&quot;true&quot;</span>
<span class="ot">        removeAbandonedTimeout=</span><span class="st">&quot;30&quot;</span><span class="ot"> maxActive=</span><span class="st">&quot;100&quot;</span>
<span class="ot">        maxIdle=</span><span class="st">&quot;30&quot;</span><span class="ot"> maxWait=</span><span class="st">&quot;10000&quot;</span><span class="ot"> username=</span><span class="st">&quot;kumikumi&quot;</span>
<span class="ot">        password=</span><span class="st">&quot;abc123&quot;</span>
<span class="ot">        driverClassName=</span><span class="st">&quot;org.postgresql.Driver&quot;</span>
<span class="ot">        url=</span><span class="st">&quot;jdbc:postgresql://localhost/kumikumi&quot;</span> <span class="kw">/&gt;</span>
<span class="kw">&lt;/Context&gt;</span></code></pre>
<p>Muista käynnistää tomcat uudelleen asetusten säätämisen jälkeen.</p>
<p>Sovelluksen pitäisi asennuksen jälkeen pyöriä osoitteessa <a href="http://t-kayttajatunnuksesi.users.cs.helsinki.fi/ConnectionTest/" class="uri">http://t-kayttajatunnuksesi.users.cs.helsinki.fi/ConnectionTest/</a></p>
<section class="alert alert-success small">
<h3>
Seuraavaksi:
</h3>
<p>Kun olet saanut testisovelluksen näyttämään kannasta tietoja, on aika koodata itse ensimmäinen tietokantalistaus.</p>
<p>Tähän on kielikohtaiset ohjeet <a href="php/listaustesti.html">PHP:lle</a> ja <a href="java/listaustesti.html">Javalle</a></p>
</section>
</section>
</div>
</div> 
</div> 
<footer>
  <a href="../sivukartta.html">Sivukartta</a> - 
  <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">AdvancedKittenry</span> 
  by
  <a xmlns:cc="http://creativecommons.org/ns#" href="http://advancedkittenry.github.io/credits.html" property="cc:attributionName" rel="cc:attributionURL">David Consuegra and others</a>
  is licensed under a 
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">
    <img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/80x15.png" />
  </a>
</footer>
</body>
</html>

