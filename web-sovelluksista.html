<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <title>Web-sovelluksien toiminta</title>
  <style type="text/css">code{white-space: pre;}</style>
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link rel="stylesheet" href="css/base.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
  <script src="javascript/bootstrap.js"></script>
  <script src="javascript/jquery.treeview.js"></script>
  <script src="javascript/jquery.scrollTo.js"></script>
  <script src="javascript/jquery.nav.js"></script>
  <script src="javascript/navi.js"></script>
</head>
<body>
<div class="titlebar">
  <div class="container">
    <div class="row">
      <h1 class="col-md-6 col-md-offset-3">Advanced Kittenry - Tietokantasovellusohjeet</h1>
    </div>
  </div>
</div>
<div class="container">
<div class="row">
<div class="navcontainer col-md-3">
<nav>
<ul>
<li><a href="index.html">Tietokantasovellus</a>
<ul>
<li><a href="aikataulu/index.html">Aikataulu</a>
<ul>
<li><a href="aikataulu/viikko1/index.html">Viikko 1</a>
<ul>
<li><a href="aikataulu/viikko1/ohjelmointikielet.html">Ohjelmointikielen valinta</a></li>
<li><a href="aikataulu/viikko1/tietokannat.html">Tietokannan valinta</a></li>
<li><a href="aikataulu/viikko1/tekniikka.html">Koodausympäristön pystytys</a></li>
<li><a href="aikataulu/viikko1/dokumentointi.html">Dokumentaation aloittaminen</a></li>
<li><a href="aikataulu/viikko1/git-ohje.html">Versionhallinta</a></li>
</ul></li>
<li><a href="aikataulu/viikko2/index.html">Viikko 2</a>
<ul>
<li><a href="aikataulu/viikko2/suunnittelu.html">Käyttöliittymän suunnittelu</a></li>
<li><a href="aikataulu/viikko2/tietokanta.html">Tietokannan suunnittelu</a></li>
</ul></li>
<li><a href="aikataulu/demo.html">Demotilaisuus</a></li>
<li><a href="aikataulu/palautus.html">Työn palautus</a></li>
</ul></li>
<li><a href="ohjeistus/index.html">Ohjeistus</a>
<ul>
<li><a href="ohjeistus/html-opas.html">HTML-opas</a></li>
<li><a href="ohjeistus/netbeans/index.html">NetBeansin käyttöönotto</a>
<ul>
<li><a href="ohjeistus/netbeans/java.html">NetBeansin käyttö Javan kanssa</a></li>
<li><a href="ohjeistus/netbeans/php.html">NetBeansin käyttö PHP:n kanssa</a></li>
<li><a href="ohjeistus/netbeans/keyring-reset.html">Unlock your keyring? - Avainnippujen nollaus</a></li>
</ul></li>
<li><a href="ohjeistus/tietokantaohjelmointi/index.html">Tietokantaohjelmointi</a>
<ul>
<li><a href="ohjeistus/tietokantaohjelmointi/kannan-alustus.html">Tietokantataulujen pystyttäminen</a></li>
<li><a href="ohjeistus/tietokantaohjelmointi/testisovellus.html">ConnectionTest-testisovellus</a></li>
<li><a href="ohjeistus/tietokantaohjelmointi/tietokantayhteys.html">Tietokantayhteyden pystytys</a></li>
<li><a href="ohjeistus/tietokantaohjelmointi/listaustesti.html">Ensimmäinen tietokantalistaus</a></li>
</ul></li>
<li><a href="ohjeistus/users/index.html">Users-palvelin ja töiden pystyttäminen</a>
<ul>
<li><a href="ohjeistus/users/kayttoonotto/index.html">Palvelujen käynnistäminen ja käyttöönotto</a>
<ul>
<li><a href="ohjeistus/users/kayttoonotto/java.html">Java ja Tomcatin käyttöönotto</a></li>
<li><a href="ohjeistus/users/kayttoonotto/mysql.html">MySql-tietokannan käyttöönotto</a></li>
<li><a href="ohjeistus/users/kayttoonotto/php.html">PHP-tuen käyttöönotto</a></li>
<li><a href="ohjeistus/users/kayttoonotto/postgresql.html">PostgreSQL-tietokannan käyttöönotto</a></li>
</ul></li>
<li><a href="ohjeistus/users/postgres-ssh-tunneli.html">PostgreSql-kannan etäkäyttö</a></li>
<li><a href="ohjeistus/users/java-war-paketit.html">Kotikoneella tehdyn Java-työn julkaisu</a></li>
<li><a href="ohjeistus/users/nautilus-ssh.html">Tiedostojen etämuokkaus Linuxilla</a></li>
</ul></li>
</ul></li>
<li><a href="aiheet/index.html">Työaiheet</a>
<ul>
<li><a href="aiheet/Drinkkiarkisto.html">Drinkkiarkisto</a></li>
<li><a href="aiheet/Elektroninen_keittokirja.html">Elektroninen keittokirja</a></li>
<li><a href="aiheet/Graduaiheet.html">Graduaiheet</a></li>
<li><a href="aiheet/Harjoitustyon_seuranta.html">Harjoitustyön seuranta</a></li>
<li><a href="aiheet/Hiihtokisojen_tulospalvelu.html">Hiihtokisojen tulospalvelu</a></li>
<li><a href="aiheet/Huutokauppa.html">Huutokauppa</a></li>
<li><a href="aiheet/Kennelkerho.html">Kennelkerho</a></li>
<li><a href="aiheet/Kuluttajan_tuki_Ry.html">Kuluttajan tuki Ry</a></li>
<li><a href="aiheet/Kurssikysely.html">Kurssikysely</a></li>
<li><a href="aiheet/Kurssin_kotisivu.html">Kurssin kotisivu</a></li>
<li><a href="aiheet/Kurssitarjonta_ja_kurssipaikan_varaus.html">Kurssitarjonta ja kurssipaikan varaus</a></li>
<li><a href="aiheet/Lainahakemusten_kasittely.html">Lainahakemusten käsittely</a></li>
<li><a href="aiheet/Laakariaseman_tyovuorolista.html">Lääkäriaseman työvuorolista</a></li>
<li><a href="aiheet/Laakarin_kotikaynnit.html">Lääkärin kotikäynnit</a></li>
<li><a href="aiheet/Matkojen_markkinointi.html">Matkojen markkinointi</a></li>
<li><a href="aiheet/Muistilista.html">Muistilista</a></li>
<li><a href="aiheet/Ostoskassi.html">Ostoskassi</a></li>
<li><a href="aiheet/Painontarkkailu.html">Painontarkkailu</a></li>
<li><a href="aiheet/Palvelubisnes.html">Palvelubisnes</a></li>
<li><a href="aiheet/Parturi-Kampaamo.html">Parturi-Kampaamo</a></li>
<li><a href="aiheet/Pizzapalvelu.html">Pizzapalvelu</a></li>
<li><a href="aiheet/Projektin_tyoaikaseuranta.html">Projektin työaikaseuranta</a></li>
<li><a href="aiheet/Rankkauslista.html">Rankkauslista</a></li>
<li><a href="aiheet/Taloyhtion_palvelut.html">Taloyhtiön palvelut</a></li>
<li><a href="aiheet/Tavaranvaihto.html">Tavaranvaihto</a></li>
<li><a href="aiheet/Tukkuliikkeen_tilaustenksittely.html">Tukkuliikkeen tilaustenkäsittely</a></li>
<li><a href="aiheet/Tutkimusaineston_kerays.html">Tutkimusaineiston keräys</a></li>
<li><a href="aiheet/Tyoaihekanta.html">Työaihekanta</a></li>
<li><a href="aiheet/Tyontekijanvuokraus_kotitoihin.html">Työntekijänvuokraus kotitöihin</a></li>
<li><a href="aiheet/Tyryhmtiedotus.html">Työryhmätiedotus</a></li>
<li><a href="aiheet/Opintoneuvonnan_usein_kysytyt_kysymykset.html">Usein kysytyt kysymykset</a></li>
<li><a href="aiheet/Vedonlyonti.html">Vedonlyönti</a></li>
<li><a href="aiheet/Vuokra-asuntojen_valitys.html">Vuokra-asuntojen välitys</a></li>
<li><a href="aiheet/Ystavanvalityspalvelu.html">Ystävänvälityspalvelu</a></li>
<li><a href="aiheet/Aanestys.html">Äänestys</a></li>
</ul></li>
<li><a href="arvosteluperusteet.html">Arvosteluperusteet</a></li>
<li><a href="dokumentaatio-ohje.html">Dokumentaatio-ohje</a></li>
<li><a href="cleancode.html">Hyvä ohjelmointityyli</a></li>
<li><a href="kaytettavyys.html">Käytettävyys</a></li>
<li><a href="mvc-opas.html">MVC-arkkitehtuuriopas</a></li>
<li><a href="sivukartta.html">Sivukartta</a></li>
<li class="selected"><a href="web-sovelluksista.html">Web-sovelluksien toiminta</a></li>
</ul></li>
</ul>
</nav>
</div>
<div class="col-md-6" id="content">
<header>
<h1 class="title">Web-sovelluksien toiminta</h1>
</header>
<script>addSectionLinks = true; </script>

<p>Web-sovellusohjelmointi eroaa normaalista sovellusohjelmoinnista monellakin saralla. Tällä sivulla selostetaan tärkeimmät termit ja eroavaisuudet.</p>
<section id="asiakkaat-ja-palvelimet" class="level2">
<h2>Asiakkaat ja palvelimet</h2>
<p>Web-sovelluksien toiminta on aina jakautunut vähintään kahteen eri paikkaan: ohjelman käyttäjän tietokoneessa pyörivä <em>selainohjelmaan</em>, joka osaa näyttää HTML-kielellä tehtyjä verkkosivuja sekä verkon takana olevaan <em>palvelimeen</em>, joka tuottaa ja lähettää pyynnöstä verkkosivun sisällön selaimelle.</p>
<figure>
<img src="images/asiakas-palvelinmalli.gif" alt="Palvelin ja asiakas" /><figcaption>Palvelin ja asiakas</figcaption>
</figure>
<p>Palvelimien sisälläkin ohjelman suoritus jakautuu lähes aina osiin. Sivuja tuottavat ohjelmat pyörivät jonkin HTTP-palvelimen, esimerkiksi <a href="http://httpd.apache.org/">Apachen</a> tai <a href="http://tomcat.apache.org/">Tomcatin</a> alaisuudessa. Tietojen säilytykseen taas käytetään erillistä tietokantapalvelinta, vaikkapa <a href="http://www.postgresql.org/">PostgreSQL:ää</a>.</p>
</section>
<section id="aineistopyynnöt" class="level2">
<h2>Aineistopyynnöt</h2>
<p>Palvelimella pyörivän ohjelman suoritus alkaa selaimen tekemästä <em><a href="http://fi.wikipedia.org/wiki/HTTP">HTTP-protokollalla</a></em> tekemästä <em>aineistopyynnöstä</em> (engl. <em>request</em>). Tämä tapahtuu joko manuaalisesti linkin klikkauksen, lomakkeen lähettämisen, tai selaimen osoitekentän käytön seurauksena, tai automaattisesti esim. sivulla olevan kuvan hakemisen muodossa.</p>
<p>Jokainen aineistopyyntö esitetään <em><a href="http://fi.wikipedia.org/wiki/URL">URL (Universal Resource Locator)</a> –muodossa</em>. Esim. http://cs.helsinki.fi/opiskelu hakee laitoksemme sivuilta kurssilistan. Pyynnöillä voidaan hakea joko staattisia tiedostoja, esim. html-tiedostoja tai kuvia, tai dynaamista sisältöä, jotka tuottaa jokin ohjelma. Suurin osa tietokantasovelluksessa tuotettavista sivuista on näitä dynaamisia sivuja.</p>
<section id="get-ja-post" class="level3">
<h3>GET ja POST</h3>
<p>Aineistopyyntöjen mukana voi kulkea kolmenlaista tietoa: selain voi lähettää palvelimelle <em>evästeitä</em>, minkä lisäksi aineistopyynnöt jakautuvat kahteen tyyppiin: <em>GET- ja POST-pyyntöihin</em>.</p>
<p>GET-pyynnöt ovat yleisempiä ja niiden mukana välitetään vain evästeet ja osoitteeseen kirjoitetut <em>GET-parametrit</em>, jotka kirjoitetaan osoitteeseen tiedostonimen perään seuraavaan tapaan <code>http://sivusto.fi/index.php?parametri=arvo&amp;toinenParametri=43</code>. POST-pyynnöt lähetetään yleensä lomakkeita lähettäessä ja niissä käytettävät <em>POST-parametrit</em> upotetaan piilotettuna aineistopyynnön otsakkeiden sisään (itseasiassa hyvin samaan tapaan kuin evästeet). Myös POST-pyynnöissä voi käyttää GET-parametreja, joskin se on harvinaisempaa.</p>
<p>Semanttisesti pyynnöt eroavat siten, että GET-pyyntö katsotaan pyynnöksi näyttää jotain tietoa, kun taas POST-pyynnöillä yleensä muutetaan jotakin, esim. kirjoitetaan tietokantaan. Selaimet esimerkiksi kysyvät refresh-nappia painaneelta käyttäjältä haluaako hän varmasti ladata sivun uudestaan, mikäli kysessä on POST-pyyntö, sillä yleensä pyynnön tekemiä muokkauksia ei haluta toistaa.</p>
<figure>
<img src="images/aineistopyynto.gif" alt="Tyypillinen aineistopyyntö" /><figcaption>Tyypillinen aineistopyyntö</figcaption>
</figure>
<p>Sen jälkeen, kun pyynnön vaatima sivu tai muu resurssi on löydetty tai tuotettu palvelimella olevalla ohjelmalla, lähetetään se selaimelle yleensä html-koodina. Selain tulkitsee tästä koodista, sekä mahdollisesti mukana tulevista kuvista ja css-määrittelyistä sen miltä sivun kuuluisi näyttää. Selain myös suorittaa mahdolliset sivujen mukana tulevat javascript-ohjelmat, ja vastaanottaa ja tallentaa palvelimen lähettämät evästeet.</p>
</section>
<section id="tilatiedon-hallinta-ja-samanaikaiset-aineistopyynnöt" class="level3">
<h3>Tilatiedon hallinta ja samanaikaiset aineistopyynnöt</h3>
<p>Viimeinen huomionarvoinen puoli web-ohjelmoinnissa on se, että kukin palvelupyyntö on teknisesti täysin erillinen muista palvelupyynnöistä. Lisäksi palvelupyyntöjä voi tulla useita samanaikaisesti useammiltakin käyttäjiltä.</p>
<p>Näiden pyyntöjen vastauksia tuottavat ohjelmat ajetaan joka pyynnölle erikseen, eivätkä ohjelmien suoritukseen liittyvät muuttujat ja tietorakenteet säästy suorituskerrasta toiseen ellei niitä erikseen tallennetta käyttäen evästeitä, <em>istuntoja</em> tai tietokantaa, joissa tieto säilyy.</p>
<p>Nykyään lähes kaikki web-sovellukset tallentavat evästeitä käyttäen vähintään jonkin istuntotunnuksen, jolla käyttäjä voidaan identifioida aineistopyyntöjen välillä. Istuntotunnuksen perusteella voidaan järjestää pääsy palvelimen säilyttämiin istuntokohtaisiin tietoihin. Joskus käytetään myös lomakkeisiin upotettuja piilokenttiä joidenkin tilatietojen välittämiseen.</p>
<figure>
<img src="images/kaksi-aineistopyyntoa.gif" alt="Useiden aineistopyyntöjen kanssakäyti" /><figcaption>Useiden aineistopyyntöjen kanssakäyti</figcaption>
</figure>
</section>
</section>
</div>
</div> 
</div> 
<footer>
  <a href="sivukartta.html">Sivukartta</a> - 
  <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">AdvancedKittenry</span> 
  by
  <a xmlns:cc="http://creativecommons.org/ns#" href="http://advancedkittenry.github.io/credits.html" property="cc:attributionName" rel="cc:attributionURL">David Consuegra and others</a>
  is licensed under a 
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">
    <img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/80x15.png" />
  </a>
</footer>
</body>
</html>
