<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <title>Ohjelmointikielen valinta</title>
  <style type="text/css">code{white-space: pre;}</style>
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>
  <link rel="stylesheet" href="../../css/base.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
  <script src="http://advancedkittenry.github.io/javascript/bootstrap.js"></script>
  <script src="http://advancedkittenry.github.io/javascript/jquery.treeview.js"></script>
  <script src="http://advancedkittenry.github.io/javascript/jquery.scrollTo.js"></script>
  <script src="http://advancedkittenry.github.io/javascript/jquery.nav.js"></script>
  <script src="http://advancedkittenry.github.io/javascript/navi.js"></script>
</head>
<body>
<div class="titlebar">
  <div class="container">
    <div class="row">
      <h1 class="col-md-6 col-md-offset-3">Advanced Kittenry - Tietokantasovellusohjeet</h1>
    </div>
  </div>
</div>
<div class="container">
<div class="row">
<div class="navcontainer col-md-3">
<nav>
<ul>
<li><a href="../../index.html">Tietokantasovellus</a>
<ul>
<li><a href="../../aikataulu/index.html">Aikataulu</a>
<ul>
<li><a href="../../aikataulu/viikko1/index.html">Viikko 1</a>
<ul>
<li><a href="../../aikataulu/viikko1/aiheet/index.html">Aiheet</a>
<ul>
<li><a href="../../aikataulu/viikko1/aiheet/Drinkkiarkisto.html">Drinkkiarkisto</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Elektroninen_keittokirja.html">Elektroninen keittokirja</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Graduaiheet.html">Graduaiheet</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Harjoitustyon_seuranta.html">Harjoitustyön seuranta</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Hiihtokisojen_tulospalvelu.html">Hiihtokisojen tulospalvelu</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Huutokauppa.html">Huutokauppa</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Kennelkerho.html">Kennelkerho</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Kuluttajan_tuki_Ry.html">Kuluttajan tuki Ry</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Kurssikysely.html">Kurssikysely</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Kurssin_kotisivu.html">Kurssin kotisivu</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Kurssitarjonta_ja_kurssipaikan_varaus.html">Kurssitarjonta ja kurssipaikan varaus</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Lainahakemusten_kasittely.html">Lainahakemusten käsittely</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Laakariaseman_tyovuorolista.html">Lääkäriaseman työvuorolista</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Laakarin_kotikaynnit.html">Lääkärin kotikäynnit</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Matkojen_markkinointi.html">Matkojen markkinointi</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Muistilista.html">Muistilista</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Ostoskassi.html">Ostoskassi</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Painontarkkailu.html">Painontarkkailu</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Palvelubisnes.html">Palvelubisnes</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Parturi-Kampaamo.html">Parturi-Kampaamo</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Pizzapalvelu.html">Pizzapalvelu</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Projektin_tyoaikaseuranta.html">Projektin työaikaseuranta</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Rankkauslista.html">Rankkauslista</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Taloyhtion_palvelut.html">Taloyhtiön palvelut</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Tavaranvaihto.html">Tavaranvaihto</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Tukkuliikkeen_tilaustenksittely.html">Tukkuliikkeen tilaustenkäsittely</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Tutkimusaineston_kerays.html">Tutkimusaineiston keräys</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Tyoaihekanta.html">Työaihekanta</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Tyontekijanvuokraus_kotitoihin.html">Työntekijänvuokraus kotitöihin</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Tyryhmtiedotus.html">Työryhmätiedotus</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Opintoneuvonnan_usein_kysytyt_kysymykset.html">Usein kysytyt kysymykset</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Vedonlyonti.html">Vedonlyönti</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Vuokra-asuntojen_valitys.html">Vuokra-asuntojen välitys</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Ystavanvalityspalvelu.html">Ystävänvälityspalvelu</a></li>
<li><a href="../../aikataulu/viikko1/aiheet/Aanestys.html">Äänestys</a></li>
</ul></li>
<li class="selected"><a href="../../aikataulu/viikko1/ohjelmointikielet.html">Ohjelmointikielen valinta</a></li>
<li><a href="../../aikataulu/viikko1/tietokannat.html">Tietokannan valinta</a></li>
<li><a href="../../aikataulu/viikko1/dokumentointi.html">Dokumentaation aloittaminen</a></li>
<li><a href="../../aikataulu/viikko1/git-ohje.html">Versionhallinta</a></li>
</ul></li>
<li><a href="../../aikataulu/viikko2/index.html">Viikko 2</a>
<ul>
<li><a href="../../aikataulu/viikko2/template.html">Yleisnäkymän suunnittelu</a></li>
<li><a href="../../aikataulu/viikko2/listanakyma.html">Listanäkymän suunnittelu</a></li>
<li><a href="../../aikataulu/viikko2/lomake.html">Muokkausnäkymät</a></li>
<li><a href="../../aikataulu/viikko2/html-versioiden-luonti.html">HTML-versioiden luominen</a></li>
<li><a href="../../aikataulu/viikko2/tietokanta.html">Tietokannan suunnittelu</a></li>
<li><a href="../../aikataulu/viikko2/tekniikka.html">Tietokantojen ja palvelimien käyttöönotto</a></li>
</ul></li>
<li><a href="../../aikataulu/demo.html">Demotilaisuus</a></li>
<li><a href="../../aikataulu/palautus.html">Työn palautus</a></li>
</ul></li>
<li><a href="../../arvosteluperusteet.html">Arvosteluperusteet</a></li>
<li><a href="../../dokumentaatio-ohje.html">Dokumentaatio-ohje</a></li>
<li><a href="../../cleancode.html">Hyvä ohjelmointityyli</a></li>
<li><a href="../../kaytettavyys.html">Käytettävyys</a></li>
<li><a href="../../web-sovelluksista.html">Web-sovelluksien toiminta</a></li>
</ul></li>
</ul>
</nav>
</div>
<div class="col-md-6" id="content">
<header>
<h1 class="title">Ohjelmointikielen valinta</h1>
</header>
<!-- order: 3 -->

<p>Tietokantasovellukset kirjoitetaan yleensä joko Javalla tai PHP:llä. Nämä ovat myös tällä hetkellä laitoksen palvelimella tuetut kielet ja niillä tekemiseen pyritään kirjoittamaan ajantasaista dokumentaatiota. Tämä sivu käsittelee lähinnä näitä kahta kieltä. Sovelluksen voi halutessaan kirjoittaa myös esim. Pythonilla tai Rubyllä, kunhan sopii asiasta ohjaajan kanssa. Mitään kovin raskaita web-kirjastoja ei tällöinkään saa käyttää. Esim. Ruby on Rails ei käy.</p>
<p>Miettiessäsi jotain tuettujen kielien ulkopuolista kieltä, pitäydy mielummin kielissä ja kirjastoissa, jotka osaat jo ja joille on olemassa hyvä dokumentaatio. Liian esoteerisillä välineillä tehdyillä töillä on usein tapana jäädä kesken.</p>
<section id="java-ja-php" class="level2">
<h2>Java ja PHP</h2>
<p>Perussyntaksiltaan PHP ja Java ovat aika samanlaisia, sillä molemmat ovat perineet syntaksinsa C-kieleltä. PHP on tosin lainannut Perliltä tavan käyttää dollaria <code>$muuttujien</code> nimien edessä. Esimerkiksi luokka Kahvikuppi määriteltäisiin näissä kielissä seuraavasti:</p>
<div class="row">
<div class="col-md-6">
<p><strong>PHP</strong></p>
<pre class="sourceCode php"><code class="sourceCode php"><span class="kw">&lt;?php</span>

<span class="kw">class</span> Kahvikuppi {

  <span class="co">/* Luokkamuuttujat */</span>
  <span class="kw">private</span> <span class="kw">$tekstiKyljessa</span><span class="ot">;</span>
  <span class="kw">private</span> <span class="kw">$tayttoaste</span> = <span class="dv">0</span><span class="ot">;</span>
  
  <span class="co">/* Konstruktori */</span>
  <span class="kw">function</span> <span class="fu">__construct</span><span class="ot">(</span><span class="kw">$teksti</span><span class="ot">)</span> {
    <span class="kw">$this</span>-&gt;tekstiKyljessa = <span class="kw">$teksti</span><span class="ot">;</span>
  }
  
  <span class="co">/* Metodeja */</span>
  <span class="kw">function</span> kaadaKahvia<span class="ot">(</span><span class="kw">$maara</span><span class="ot">)</span> {
    <span class="kw">$this</span>-&gt;tayttoaste += <span class="kw">$maara</span><span class="ot">;</span>
    <span class="kw">if</span> <span class="ot">(</span><span class="kw">$this</span>-&gt;tayttoaste &gt; <span class="dv">100</span><span class="ot">)</span> {
      <span class="kw">throw</span> <span class="kw">new</span> <span class="kw">Exception</span><span class="ot">(</span><span class="st">&quot;Kahvikuppi valui yli&quot;</span><span class="ot">);</span>
    }
  }
  <span class="kw">function</span> juoTyhjaksi<span class="ot">()</span> {
    <span class="kw">$this</span>-&gt;tayttoaste = <span class="dv">0</span><span class="ot">;</span>
  }
  <span class="kw">function</span> getKahvinMaara<span class="ot">()</span> {
    <span class="kw">return</span> <span class="kw">$this</span>-&gt;tayttoaste<span class="ot">;</span>
  }
}</code></pre>
</div>
<div class="col-md-6">
<p><strong>Java</strong></p>
<pre class="sourceCode java"><code class="sourceCode java">

<span class="kw">class</span> Kahvikuppi {
  
  <span class="co">/* Luokkamuuttujat */</span>
  <span class="kw">private</span> String tekstiKyljessa
  <span class="kw">private</span> <span class="dt">int</span> tayttoaste = <span class="dv">0</span>;

  <span class="co">/* Konstruktori */</span>
  <span class="fu">Kahvikuppi</span>(String teksti) { 
    <span class="kw">this</span>.<span class="fu">tekstiKyljessa</span> = teksti;
  }
  
  <span class="co">/* Metodeja */</span>
  <span class="dt">void</span> <span class="fu">kaadaKahvia</span>(<span class="dt">int</span> maara) {
    tayttoaste += $maara;
    <span class="kw">if</span> (tayttoaste &gt; <span class="dv">100</span>) {
      <span class="kw">throw</span> <span class="kw">new</span> Exception(<span class="st">&quot;Kahvikuppi valui yli&quot;</span>);
    }
  }
  <span class="dt">void</span> <span class="fu">juoTyhjaksi</span>() {
    tayttoaste = <span class="dv">0</span>;
  }
  <span class="dt">int</span> <span class="fu">getKahvinMaara</span>() {
    <span class="kw">return</span> tayttoaste;
  }
}</code></pre>
</div>
</div>

<p>Kuten esimerkeistä voi huomata, kielet ovat normaalissa olio-ohjelmoinnissa melko samanlaisia. Suurin osa eroista on merkintätapaeroja, mutta eräs tärkeä ero esimerkistä näkyy. PHP:ssä ei koskaan määritetä muuttujalle tyyppiä, kuten Javassa tehdään. PHP:ssä muuttujaan voi sijoittaa minkätyyppistä dataa tahansa ja tietotyyppi voi jopa vaihdella ajon aikana. Muuttujia ei PHP:ssä myöskään tarvitse esitellä mitenkään. Esimerkkejä:</p>
<div class="row">
<div class="col-md-6">
<p><strong>PHP</strong></p>
<pre class="sourceCode php"><code class="sourceCode php"><span class="kw">&lt;?php</span>
<span class="kw">$luku</span> = <span class="dv">42</span><span class="ot">;</span>
<span class="kw">$nimi</span> = <span class="st">&quot;Pertti&quot;</span><span class="ot">;</span>
<span class="kw">$kuppi</span> = <span class="kw">new</span> Kahvikuppi<span class="ot">(</span><span class="st">&quot;Pertin kuppi&quot;</span><span class="ot">);</span>

<span class="co">//PHP:ssä tämäkin on mahdollista,</span>
<span class="co">//mutta ei suositeltavaa:</span>
<span class="kw">$luku</span> = <span class="kw">$nimi</span><span class="ot">;</span>

<span class="co">//Seuraavakaan ei vielä kaada ohjelmaa.</span>
<span class="co">//Muuttuja $luku saa arvokseen null</span>
<span class="kw">$luku</span> = <span class="kw">$nemi</span><span class="ot">;</span></code></pre>
</div>
<div class="col-md-6">
<p><strong>Java</strong></p>
<pre class="sourceCode java"><code class="sourceCode java">
<span class="dt">int</span> luku = <span class="dv">42</span>;
String nimi = <span class="st">&quot;Pertti&quot;</span>;
Kahvikuppi kuppi = <span class="kw">new</span> <span class="fu">Kahvikuppi</span>(<span class="st">&quot;Pertin kuppi&quot;</span>);

<span class="co">//Seuraavaa riviä on mahdotonta</span>
<span class="co">//saada kääntymään:</span>
luku = nimi;

<span class="co">//Tämäkään ei käänny. Muuttujaa</span>
<span class="co">//nemi ei ole esitelty!</span>
luku = nemi;</code></pre>
</div>
</div>

<p>Javaa koodatessa joutuu kirjoittamaan hieman enemmän, mutta PHP:llä saattaa varsinkin aluksi tehdä tyyppivirheitä, jotka huomaa vasta ajon aikana.</p>
<section id="htmln-käyttö" class="level3">
<h3>HTML:n käyttö</h3>
<p>Toinen huomionarvoinen seikka PHP:tä kirjoittaessa on kielen käyttämät <em>&lt;?php-tägit</em>, jotka aloittavat PHP-koodin. Niiden ulkopuolella olevan tekstin PHP oletuksena tulostaa sellaisenaan. Tämä tekee PHP:n käyttämisestä yksinkertaisten nettisivujen tekemiseen erittäin helppoa:</p>
<p><strong>helloworld.php</strong></p>
<pre class="sourceCode php"><code class="sourceCode php"><span class="kw">&lt;?php</span>
  <span class="fu">header</span><span class="ot">(</span><span class="st">&quot;Content-type: text/html;charset=UTF-8&quot;</span><span class="ot">);</span>
  <span class="kw">$pagetitle</span> =  <span class="st">&quot;Hello World!&quot;</span><span class="ot">;</span>
<span class="kw">?&gt;</span>&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;<span class="kw">&lt;?php</span> <span class="fu">echo</span> <span class="kw">$pagetitle</span><span class="ot">;</span> <span class="kw">?&gt;</span>&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;<span class="kw">&lt;?php</span> <span class="fu">echo</span> <span class="kw">$pagetitle</span><span class="ot">;</span> <span class="kw">?&gt;</span>&lt;/h1&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>Yllä oleva sivu toimii sellaisenaan, kun osoittaa selaimensa osoitteeseen, jossa helloworld.php-tiedosto sijaitsee. Esim. <code>sivusto.fi/php-sovelluksen/osoite/helloworld.php</code>. Javalla vastaavan tekeminen on hieman monimutkaisempaa ja vaatii Servlet-luokan ja template-tiedoston:</p>
<p><strong>src/java/servlets/HelloWorldServlet.java</strong></p>
<pre class="sourceCode java"><code class="sourceCode java"><span class="kw">package servlets;</span>

<span class="kw">import java.io.IOException;</span>
<span class="kw">import javax.servlet.RequestDispatcher;</span>
<span class="kw">import javax.servlet.ServletException;</span>
<span class="kw">import javax.servlet.annotation.WebServlet;</span>
<span class="kw">import javax.servlet.http.HttpServlet;</span>
<span class="kw">import javax.servlet.http.HttpServletRequest;</span>
<span class="kw">import javax.servlet.http.HttpServletResponse;</span>

<span class="fu">@WebServlet</span>(name = <span class="st">&quot;HelloWorldServlet&quot;</span>, urlPatterns = {<span class="st">&quot;/HelloWorld&quot;</span>})
<span class="kw">public</span> <span class="kw">class</span> HelloWorldServlet <span class="kw">extends</span> HttpServlet {

    <span class="fu">@Override</span>
    <span class="kw">protected</span> <span class="dt">void</span> <span class="fu">doGet</span>(HttpServletRequest request, HttpServletResponse response)
            <span class="kw">throws</span> ServletException, IOException {
        response.<span class="fu">setContentType</span>(<span class="st">&quot;text/html;charset=UTF-8&quot;</span>);
        request.<span class="fu">setAttribute</span>(<span class="st">&quot;title&quot;</span>, <span class="st">&quot;Hello world!&quot;</span>);
        
        RequestDispatcher dispatcher = request.<span class="fu">getRequestDispatcher</span>(<span class="st">&quot;helloworld.jsp&quot;</span>);
        dispatcher.<span class="fu">forward</span>(request, response);
    }

}</code></pre>
<p><strong>web/helloworld.jsp</strong></p>
<pre class="sourceCode html"><code class="sourceCode html"><span class="er">&lt;</span>%@page contentType=&quot;text/html&quot; pageEncoding=&quot;UTF-8&quot;%&gt;
<span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span>
<span class="kw">&lt;html&gt;</span>
  <span class="kw">&lt;head&gt;</span>
    <span class="kw">&lt;title&gt;</span>${title}<span class="kw">&lt;/title&gt;</span>
  <span class="kw">&lt;/head&gt;</span>
  <span class="kw">&lt;body&gt;</span>
    <span class="kw">&lt;h1&gt;</span>${title}<span class="kw">&lt;/h1&gt;</span>
  <span class="kw">&lt;/body&gt;</span>
<span class="kw">&lt;/html&gt;</span></code></pre>
<p>Ylläoleva ohjelma käynnistyy melko lailla PHP-esimerkin tapaan osoitteessa <code>sivusto.fi/java-sovelluksen/osoite/HelloWorld</code>. Tässä käytetty JSP-tiedostoformaatti on Javan-vastaus PHP:n suoraviivaiselle tavalle käsitellä HTML:n tulostusta ja sitä on varsin yksinkertaista käyttää.</p>
<p>Itse Java-ohjelmakoodi sensijaan on aika monimutkaista ja käyttää taustalla suurta määrää Javan kirjastoja. Tätä ei kovin moni jaksaisi kirjoittaa, siksi ylläolevasta koodista suurin osa onkin NetBeansin autogeneroimaa, eikä kaikkea onneksi tarvitse kirjoittaa itse.</p>
<p>PHP on kielenä optimoitu nopeaan nettisivustojen kasaamiseen. Suuremmilla sivustoilla ja monimutkaisempia kehyksiä käytettäessä PHP-koodikin alkaa muistuttaa yllä olevaa Java-koodia ja pitenee ja monimutkaistuu merkittävästi. Yleisenä nyrkkisääntönä kuitenkin on, että pienikokoisempiin web-projekteihin - esimerkiksi tietokantasovelluksiin - Java-koodia joutuu kirjoittamaan enemmän kuin vastaaviin PHP:llä tehtyihin sovelluksiin.</p>
</section>
<section id="tietokannan-käyttö" class="level3">
<h3>Tietokannan käyttö</h3>
<p>Sekä PHP että Java hoitavat tietokannan käytön oliopohjaisesti tavalla, joka mahdollistaa kielen sisäisten muuttujien upottamisen SQL-lausekkeisiin helposti ja tietoturvallisesti.</p>
<div class="row">
<div class="col-md-6">
<p><strong>PHP</strong></p>
<pre class="sourceCode php"><code class="sourceCode php"><span class="kw">&lt;?php</span>
  <span class="co">//Otetaan yhteys mysql-tietokantaan</span>
  <span class="kw">$yhteys</span> = <span class="kw">new</span> <span class="kw">PDO</span><span class="ot">(</span><span class="st">&quot;mysql:host=localhost;dbname=tietokannan_nimi&quot;</span><span class="ot">,</span> <span class="st">&quot;kayttaja&quot;</span><span class="ot">,</span> <span class="st">&quot;salasana&quot;</span><span class="ot">);</span>

  <span class="co">//Suoritetaan sql-kysely. Haetaan täysi-ikäiset Lehtoset tietokannasta</span>
  <span class="kw">$sql</span> = <span class="st">&quot;SELECT id, nimi, osoite FROM kayttajat WHERE ika &gt;= ? and sukunimi = ?&quot;</span><span class="ot">;</span>
  <span class="kw">$kysely</span> = <span class="kw">$yhteys</span>-&gt;prepare<span class="ot">(</span><span class="kw">$sql</span><span class="ot">);</span>
  <span class="kw">$tulokset</span> = <span class="kw">$kysely</span>-&gt;execute<span class="ot">(</span><span class="fu">array</span><span class="ot">(</span><span class="dv">18</span><span class="ot">,</span><span class="st">&quot;Lehtonen&quot;</span><span class="ot">));</span>

  <span class="co">//Tulostetaan tietoja löydetyistä käyttäjistä</span>
  <span class="kw">while</span><span class="ot">(</span><span class="kw">$rivi</span> = <span class="kw">$tulokset</span>-&gt;fetchObject<span class="ot">())</span> {
    <span class="fu">echo</span> <span class="st">&quot;Käyttäjän </span><span class="kw">$rivi</span><span class="st">-&gt;etunimi </span><span class="kw">$rivi</span><span class="st">-&gt;sukunimi ikä on </span><span class="kw">$rivi</span><span class="st">-&gt;ika&quot;</span><span class="ot">;</span>
  }

  <span class="co">//PHP sulkee yhteydet ja resurssit automaattisesti</span>
  <span class="co">//suorituksen päätteeksi</span></code></pre>
</div>
<div class="col-md-6">
<p><strong>Java</strong></p>
<pre class="sourceCode java"><code class="sourceCode java">Connection yhteys = <span class="kw">null</span>;
PreparedStatement kysely = <span class="kw">null</span>;
ResultSet tulokset = <span class="kw">null</span>;

<span class="kw">try</span> {
  <span class="co">//Etsitään mysql-ajuri ja otetaan yhteys tietokantaan</span>
  Class.<span class="fu">forName</span>(<span class="st">&quot;com.mysql.jdbc.Driver&quot;</span>);
  yhteys = DriverManager.<span class="fu">getConnection</span>(<span class="st">&quot;jdbc:mysql://localhost/tietokannan_nimi?user=kayttaja&amp;password=salasana&quot;</span>);
  
  <span class="co">//Suoritetaan sql-kysely. Haetaan täysi-ikäiset Lehtoset tietokannasta</span>
  String sql = <span class="st">&quot;SELECT etunimi, sukunimi, ika FROM kayttajat WHERE ika &gt;= ? and sukunimi = ?&quot;</span>;
  kysely = yhteys.<span class="fu">prepareStatement</span>(sql);
  kysely.<span class="fu">setInteger</span>(<span class="dv">1</span>, <span class="dv">18</span>);
  kysely.<span class="fu">setString</span>(<span class="dv">2</span>, <span class="st">&quot;Lehtonen&quot;</span>);
  tulokset = preparedStatement.<span class="fu">executeQuery</span>();

  <span class="co">//Tulostetaan tietoja löydetyistä käyttäjistä</span>
  <span class="kw">while</span>(tulokset.<span class="fu">next</span>()) {
    String nimi = tulokset.<span class="fu">getString</span>(<span class="st">&quot;etunimi&quot;</span>) + <span class="st">&quot; &quot;</span> +tulokset.<span class="fu">getString</span>(<span class="st">&quot;sukunimi&quot;</span>);
    <span class="dt">int</span> ika = tulokset.<span class="fu">getString</span>(<span class="st">&quot;ika&quot;</span>);
    System.<span class="fu">out</span>.<span class="fu">println</span>(<span class="st">&quot;Käyttäjän &quot;</span>+nimi+<span class="st">&quot; ikä on &quot;</span>+ika);
  }

} <span class="kw">catch</span> (Exception e) {
  <span class="kw">throw</span> e;
} <span class="kw">finally</span> {
  <span class="co">//Suljetaan lopulta kaikki avatut resurssit</span>
  <span class="kw">try</span> { tulokset.<span class="fu">close</span>(); } <span class="kw">catch</span> (Exception e) {  }
  <span class="kw">try</span> { kysely.<span class="fu">close</span>(); } <span class="kw">catch</span> (Exception e) {  }
  <span class="kw">try</span> { yhteys.<span class="fu">close</span>(); } <span class="kw">catch</span> (Exception e) {  }
}</code></pre>
</div>
</div>

<p>PHP on tässäkin tapauksessa merkittävästi vähäsanaisempi. Taitava koodari lyhentää yllä olevasta esimerkistä toistuvat koodinpätkät kuitenkin yleiskäyttöisiin metodeihin, jolloin lopullisessa käytössä eri kielten tapa käsitellä tietokantaa on lähestulkoon yhtä monisanainen. Lisäksi Javan versiossa 7 resurssien sulkemisesta on <a href="http://stackoverflow.com/questions/9260159/java-7-automatic-resource-management-jdbc">tehty automaattisempaa</a>. Valitettavasti tosin laitoksen palvelimilla oleva versio ei ole vielä ajan tasalla.</p>
</section>
</section>
<section id="yhteenveto" class="level2">
<h2>Yhteenveto</h2>
<p>Kumpaa sitten kannattaa käyttää? Sitä mikä tuntuu kotoisimmalta ja luonnollisemmalta. Tätä nykyä suurin osa valitsee PHP:n sen keveyden takia, mutta kumpaankin kieleen on tarjolla varsin mallikkaat välineistöt tietokantasovelluksen tekemiseen.</p>
<table class="table table-striped table-bordered">
<thead>
<tr class="header">
<th style="text-align: left;">Ominaisuus</th>
<th style="text-align: left;">Java</th>
<th style="text-align: left;">PHP</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Ajotapa</td>
<td style="text-align: left;">Käännetään ennen ajoa</td>
<td style="text-align: left;">Tulkitaan ajonaikaisesti</td>
</tr>
<tr class="even">
<td style="text-align: left;">Tyyppijärjestelmä</td>
<td style="text-align: left;">Vahva tyypitys</td>
<td style="text-align: left;">Heikko tyypitys</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HTML:n tuottaminen</td>
<td style="text-align: left;">JSP-kielellä</td>
<td style="text-align: left;">Suoraan PHP-koodin sisällä</td>
</tr>
</tbody>
</table>
<p>Voit tutustua myös Sami Saadan tekemiin esimerkkisovelluksiin <a href="https://github.com/tsoha-syksy2012/ostoslista-esimerkki/tree/php-raaka">PHP</a> ja <a href="https://github.com/tsoha-syksy2012/ostoslista-esimerkki/tree/java-servlet">Java-kielellä</a>. Bonuksena samasta aiheesta on olemassa myös hyvin tiivis <a href="https://github.com/tsoha-syksy2012/ostoslista-esimerkki/tree/ruby_sinatra_sequel">Ruby-toteutus</a> Sinatra-kehyksellä tehtynä.</p>
<p>Linkkejä:</p>
<ul>
<li><a href="http://docs.oracle.com/javaee/">Javan EE dokumentaatio</a></li>
<li><a href="http://www.php.net/manual/en/">PHP:n dokumentaatio</a></li>
</ul>
<section class="alert alert-success small"><h3>
Seuraavaksi:
</h3>
<p>Kun olet valinnut aiheesi ja mieleisen ohjelmointikielen, vilkaise <a href="tietokannat.html">tietokannan valitsemista</a>.</p>
</section>




</section>
</div>
</div> 
</div> 
<footer>
  <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">AdvancedKittenry</span> 
  by
  <a xmlns:cc="http://creativecommons.org/ns#" href="http://advancedkittenry.github.io/credits.html" property="cc:attributionName" rel="cc:attributionURL">David Consuegra and others</a>
  is licensed under a 
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">
    <img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/80x15.png" />
  </a>
</footer>
</body>
</html>
